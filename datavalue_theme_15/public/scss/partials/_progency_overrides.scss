// Progency Overrides - Blowminded Desk (Fix)

// Force Dark Glass Theme regardless of System Setting
:root,
[data-theme="light"],
[data-theme="dark"] {
    --pro-bg: #0a0a0c;
    --pro-surface: rgba(22, 22, 26, 0.9); // Slightly more opaque for readability
    --pro-primary: #7f5af0;
    --pro-text: #fffffe;
    --navbar-bg: rgba(22, 22, 26, 0.82);
}

body,
body[data-theme] {
    background-color: var(--pro-bg) !important;
    color: var(--pro-text) !important;
}

// Fix Navbar (Floating)
header.navbar {
    background: var(--navbar-bg) !important;
    backdrop-filter: blur(15px) !important;
    -webkit-backdrop-filter: blur(15px);
    border-bottom: 1px solid rgba(255, 255, 255, 0.1) !important;
    border-radius: 16px !important;
    margin: 12px 20px 0 20px !important;
    width: calc(100% - 40px) !important; // Explicit width calculation
    position: fixed !important; // Force fixed
    top: 0;
    left: 0;
    z-index: 1001;
    box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37) !important;
}

// Adjust Page Container to account for Floating Navbar
.layout-main-section,
.page-container {
    padding-top: 20px !important; // Add space for fixed navbar
    margin-top: 60px !important;
}

// Fix Sidebar
.layout-side-section {
    background: transparent !important;
    padding-left: 20px !important;
    padding-top: 30px !important;

    .sidebar-item {
        margin-bottom: 8px;

        a {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(5px);
            border-radius: 10px;
            color: #94a1b2 !important;
            padding: 10px 15px !important;

            &:hover {
                background: rgba(127, 90, 240, 0.15) !important;
                color: #fff !important;
                transform: translateX(5px);
                box-shadow: 0 0 10px rgba(127, 90, 240, 0.2);
            }

            &.active {
                background: var(--pro-primary) !important;
                color: white !important;
                box-shadow: 0 0 15px rgba(127, 90, 240, 0.5);
            }
        }
    }
}

// Fix Cards (Black-on-Black issue)
.frappe-card,
.widget-group {
    background: #16161a !important; // Solid color fallback
    background: rgba(22, 22, 26, 0.8) !important;
    border: 1px solid rgba(255, 255, 255, 0.08) !important;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06) !important;

    // Header
    .widget-head,
    .card-header {
        border-bottom: 1px solid rgba(255, 255, 255, 0.05) !important;

        .widget-title {
            color: #fffffe !important;
            font-size: 1.1rem !important;
            font-weight: 600 !important;
        }
    }

    // Body Text
    .widget-body,
    .card-body {
        color: #94a1b2 !important;
    }

    // Links/Items within cards
    a,
    .link-content {
        color: #fffffe !important;

        &:hover {
            color: var(--pro-primary) !important;
        }
    }
}

// Shortcuts Area
.shortcut-widget-box {
    background: rgba(255, 255, 255, 0.05) !important;
    border: 1px solid rgba(255, 255, 255, 0.1) !important;
    border-radius: 12px !important;

    .widget-title {
        color: #fff !important;
    }

    &:hover {
        background: rgba(255, 255, 255, 0.1) !important;
        border-color: var(--pro-primary) !important;
    }
}

// Hide standard white background layers
.page-head {
    background: transparent !important;
    border-bottom: none !important;
}

// Fix Inputs to be visible on dark bg
.form-control {
    background-color: #010101 !important;
    border: 1px solid #333 !important;
    color: #fff !important;

    &:focus {
        border-color: var(--pro-primary) !important;
        box-shadow: 0 0 0 3px rgba(127, 90, 240, 0.25) !important;
    }
}